const util = require('util.js');

App({
    global: {
        user: wx.getStorageSync('user') || null,
        todos: wx.getStorageSync('todos') || [],
        buttons: [
            {
                label: '添加',
                url: '/pages/item/index',
                icon: "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBjbGFzcz0iIj48Zz48Zz4KCTxwYXRoIHN0eWxlPSJmaWxsOiNGREZERkQiIGQ9Ik0yNTYsNTEyYy0zLjA4NiwwLjAwMS02LjA0Ny0xLjIyNS04LjIyOS0zLjQwN2MtMi4xODItMi4xODItMy40MDgtNS4xNDMtMy40MDctOC4yMjlWMTEuNjM2ICAgQzI0NC4zNjQsNS4yMSwyNDkuNTczLDAsMjU2LDBzMTEuNjM2LDUuMjEsMTEuNjM2LDExLjYzNnY0ODguNzI3YzAuMDAxLDMuMDg2LTEuMjI1LDYuMDQ3LTMuNDA3LDguMjI5ICAgQzI2Mi4wNDcsNTEwLjc3NSwyNTkuMDg2LDUxMi4wMDEsMjU2LDUxMnoiIGRhdGEtb3JpZ2luYWw9IiM0MjhERkYiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiNGQkZCRkMiPjwvcGF0aD4KCTxwYXRoIHN0eWxlPSJmaWxsOiNGREZERkQiIGQ9Ik01MDAuMzY0LDI2Ny42MzZIMTEuNjM2QzUuMjEsMjY3LjYzNiwwLDI2Mi40MjcsMCwyNTZzNS4yMS0xMS42MzYsMTEuNjM2LTExLjYzNmg0ODguNzI3ICAgYzYuNDI3LDAsMTEuNjM2LDUuMjEsMTEuNjM2LDExLjYzNlM1MDYuNzksMjY3LjYzNiw1MDAuMzY0LDI2Ny42MzZ6IiBkYXRhLW9yaWdpbmFsPSIjNDI4REZGIiBjbGFzcz0iYWN0aXZlLXBhdGgiIGRhdGEtb2xkX2NvbG9yPSIjRkJGQkZDIj48L3BhdGg+CjwvZz48L2c+IDwvc3ZnPg=="
            },
            {
                label: '首页',
                url: '/pages/index/index',
                icon: "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjcuMDIgMjcuMDIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI3LjAyIDI3LjAyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIGNsYXNzPSIiPjxnPjxnPgoJPHBhdGggc3R5bGU9ImZpbGw6I0ZDRkJGRCIgZD0iTTMuNjc0LDI0Ljg3NmMwLDAtMC4wMjQsMC42MDQsMC41NjYsMC42MDRjMC43MzQsMCw2LjgxMS0wLjAwOCw2LjgxMS0wLjAwOGwwLjAxLTUuNTgxICAgYzAsMC0wLjA5Ni0wLjkyLDAuNzk3LTAuOTJoMi44MjZjMS4wNTYsMCwwLjk5MSwwLjkyLDAuOTkxLDAuOTJsLTAuMDEyLDUuNTYzYzAsMCw1Ljc2MiwwLDYuNjY3LDAgICBjMC43NDksMCwwLjcxNS0wLjc1MiwwLjcxNS0wLjc1MlYxNC40MTNsLTkuMzk2LTguMzU4bC05Ljk3NSw4LjM1OEMzLjY3NCwxNC40MTMsMy42NzQsMjQuODc2LDMuNjc0LDI0Ljg3NnoiIGRhdGEtb3JpZ2luYWw9IiMwMzAxMDQiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiNGQUY5RkIiPjwvcGF0aD4KCTxwYXRoIHN0eWxlPSJmaWxsOiNGQ0ZCRkQiIGQ9Ik0wLDEzLjYzNWMwLDAsMC44NDcsMS41NjEsMi42OTQsMGwxMS4wMzgtOS4zMzhsMTAuMzQ5LDkuMjhjMi4xMzgsMS41NDIsMi45MzksMCwyLjkzOSwwICAgTDEzLjczMiwxLjU0TDAsMTMuNjM1eiIgZGF0YS1vcmlnaW5hbD0iIzAzMDEwNCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBkYXRhLW9sZF9jb2xvcj0iI0ZBRjlGQiI+PC9wYXRoPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZDRkJGRCIgcG9pbnRzPSIyMy44Myw0LjI3NSAyMS4xNjgsNC4yNzUgMjEuMTc5LDcuNTAzIDIzLjgzLDkuNzUyICAiIGRhdGEtb3JpZ2luYWw9IiMwMzAxMDQiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiNGQUY5RkIiPjwvcG9seWdvbj4KPC9nPjwvZz4gPC9zdmc+"
            },
            {
                label: '反馈',
                url: '/pages/about/index',
                icon: "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBjbGFzcz0iaG92ZXJlZC1wYXRocyI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU5LjEyMyw2MC41NTRjLTMyLjIyMS0zMi4yMi03Ni44NzQtNDguMTM1LTEyMi41MTEtNDMuNjYyYy0zNC40MTIsMy4zNzMtNjcuMDM5LDE4LjkxNC05MS44NzEsNDMuNzU4ICAgIEMxOS45MTUsODUuNDksNC4zODQsMTE4LjEyNCwxLjAwOSwxNTIuNTQzYy0zLjM0MiwzNC4wODUsNC4zOTMsNjcuMDgzLDIyLjM5Miw5NS43MTFMMS4zNTYsMjk3Ljg1NSAgICBjLTIuNjI4LDUuOTEzLTEuMzcsMTIuNjg5LDMuMjA2LDE3LjI2NWMyLjk4OCwyLjk4OCw2LjkxNCw0LjU2MSwxMC45MjYsNC41NjFjMi4xMzEsMCw0LjI4Ny0wLjQ0NCw2LjMzNy0xLjM1Nmw0OS42MDEtMjIuMDQ1ICAgIGMyOC42MjksMTcuOTk4LDYxLjYzLDI1LjczNCw5NS43MTIsMjIuMzkxYzkuMDc5LTAuODkxLDE4LjEyOS0yLjYzMiwyNi44OTctNS4xNzhjMy45NzgtMS4xNTUsNi4yNjctNS4zMTUsNS4xMTItOS4yOTMgICAgYy0xLjE1Ni0zLjk3Ny01LjMxNi02LjI2NS05LjI5NS01LjExMWMtNy44ODIsMi4yODgtMTYuMDE3LDMuODU0LTI0LjE4LDQuNjU0Yy0zMS45OTQsMy4xNDEtNjIuOTE2LTQuNTQxLTg5LjQyNC0yMi4yMDcgICAgYy0yLjEzOS0xLjQyNS00Ljg1OC0xLjY1Ny03LjIwNS0wLjYxMmwtNTMuMzEzLDIzLjY5NGMtMC4xNzgsMC4wOC0wLjMxOCwwLjE0Mi0wLjU2NS0wLjEwNWMtMC4yNDctMC4yNDctMC4xODQtMC4zODctMC4xMDUtMC41NjUgICAgbDIzLjY5NS01My4zMTNjMS4wNDMtMi4zNDgsMC44MTItNS4wNjctMC42MTItNy4yMDVDMjAuNDc4LDIxNi45MjIsMTIuOCwxODYsMTUuOTM3LDE1NC4wMDcgICAgYzMuMDM3LTMwLjk3MiwxNy4wMzQtNjAuMzYxLDM5LjQxNC04Mi43NTJjMjIuMzgzLTIyLjM5NSw1MS43NjItMzYuMzk5LDgyLjcyNC0zOS40MzRjNDEuMTUzLTQuMDMzLDgxLjQwNSwxMC4zMDUsMTEwLjQ0LDM5LjM0ICAgIGMyOS4wMzYsMjkuMDM1LDQzLjM3NSw2OS4yODksMzkuMzQyLDExMC40NGMtMC40MDQsNC4xMjMsMi42MSw3Ljc5Miw2LjczMyw4LjE5NmM0LjEzMywwLjQwNSw3Ljc5Mi0yLjYxMSw4LjE5Ni02LjczMyAgICBDMzA3LjI2LDEzNy40MjgsMjkxLjM0NCw5Mi43NzUsMjU5LjEyMyw2MC41NTR6IiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiNGREZERkMiIGRhdGEtb2xkX2NvbG9yPSIjRkY0RjAwIj48L3BhdGg+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0yMzEuOTc2LDE2MC4yODFoLTgwLjA3N2MtNC4xNDIsMC03LjUsMy4zNTgtNy41LDcuNWMwLDQuMTQyLDMuMzU4LDcuNSw3LjUsNy41aDgwLjA3N2M0LjE0MiwwLDcuNS0zLjM1OCw3LjUtNy41ICAgIEMyMzkuNDc2LDE2My42MzksMjM2LjExOCwxNjAuMjgxLDIzMS45NzYsMTYwLjI4MXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I0ZERkRGQyIgZGF0YS1vbGRfY29sb3I9IiNGRjRGMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHBhdGggZD0iTTIwNy45NTMsMTIwLjI0MmgtNTYuMDU0Yy00LjE0MiwwLTcuNSwzLjM1OC03LjUsNy41YzAsNC4xNDIsMy4zNTgsNy41LDcuNSw3LjVoNTYuMDU0YzQuMTQyLDAsNy41LTMuMzU4LDcuNS03LjUgICAgQzIxNS40NTMsMTIzLjYsMjEyLjA5NSwxMjAuMjQyLDIwNy45NTMsMTIwLjI0MnoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I0ZERkRGQyIgZGF0YS1vbGRfY29sb3I9IiNGRjRGMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHBhdGggZD0iTTIzMS45NzYsMjAwLjMxOWgtODAuMDc3Yy00LjE0MiwwLTcuNSwzLjM1OC03LjUsNy41YzAsNC4xNDIsMy4zNTgsNy41LDcuNSw3LjVoODAuMDc3YzQuMTQyLDAsNy41LTMuMzU4LDcuNS03LjUgICAgQzIzOS40NzYsMjAzLjY3NywyMzYuMTE4LDIwMC4zMTksMjMxLjk3NiwyMDAuMzE5eiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojRkRGREZDIiBkYXRhLW9sZF9jb2xvcj0iI0ZGNEYwMCI+PC9wYXRoPgoJPC9nPgo8L2c+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNNTEwLjY0NCw0NzQuMDI1bC0yMi4wNDUtNDkuNjAyYzE3Ljk5OC0yOC42MjgsMjUuNzMzLTYxLjYyNywyMi4zOTItOTUuNzExYy0zLjM3NS0zNC40MTgtMTguOTA3LTY3LjA1Mi00My43MzMtOTEuODkzICAgIGMtMjQuODMzLTI0Ljg0Ni01Ny40Ni00MC4zODUtOTEuODcxLTQzLjc1OGMtNDUuNjMtNC40NjgtOTAuMjg5LDExLjQ0MS0xMjIuNTExLDQzLjY2MiAgICBjLTMyLjIyMSwzMi4yMjEtNDguMTM2LDc2Ljg3NC00My42NjQsMTIyLjUxYzMuMzczLDM0LjQxMiwxOC45MTMsNjcuMDQsNDMuNzU3LDkxLjg3M2MyNC44NCwyNC44MjcsNTcuNDc1LDQwLjM1OCw5MS44OTMsNDMuNzM0ICAgIGMzNC4wODQsMy4zNDEsNjcuMDgzLTQuMzkyLDk1LjcxMi0yMi4zOTFsNDkuNiwyMi4wNDVjMi4wNTEsMC45MTIsNC4yMDYsMS4zNTUsNi4zMzcsMS4zNTVjNC4wMTIsMCw3LjkzOS0xLjU3MywxMC45MjctNC41NjEgICAgQzUxMi4wMTQsNDg2LjcxNCw1MTMuMjcyLDQ3OS45MzcsNTEwLjY0NCw0NzQuMDI1eiBNNDk2LjgzMSw0ODAuNjgyYy0wLjI0NywwLjI0Ni0wLjM4NywwLjE4NC0wLjU2NSwwLjEwNWwtNTMuMzEzLTIzLjY5NCAgICBjLTAuOTc0LTAuNDMzLTIuMDEyLTAuNjQ2LTMuMDQ1LTAuNjQ2Yy0xLjQ1OCwwLTIuOTA5LDAuNDI1LTQuMTYsMS4yNTljLTI2LjUwOCwxNy42NjYtNTcuNDMyLDI1LjM0NS04OS40MjQsMjIuMjA3ICAgIGMtMzAuOTczLTMuMDM3LTYwLjM2MS0xNy4wMzYtODIuNzUyLTM5LjQxNWMtMjIuMzk1LTIyLjM4My0zNi4zOTgtNTEuNzYzLTM5LjQzMy04Mi43MjUgICAgYy00LjAzMy00MS4xNTEsMTAuMzA3LTgxLjQwNCwzOS4zNDItMTEwLjQ0YzI5LjAzNS0yOS4wMzUsNjkuMjg5LTQzLjM3NSwxMTAuNDQtMzkuMzRjMzAuOTYzLDMuMDM1LDYwLjM0MiwxNy4wMzksODIuNzI0LDM5LjQzNCAgICBjMjIuMzgsMjIuMzkyLDM2LjM3Nyw1MS43OCwzOS40MTQsODIuNzUxYzMuMTM3LDMxLjk5NC00LjU0Miw2Mi45MTYtMjIuMjA3LDg5LjQyM2MtMS40MjUsMi4xMzgtMS42NTYsNC44NTctMC42MTIsNy4yMDUgICAgbDIzLjY5NSw1My4zMTNDNDk3LjAxNSw0ODAuMjk1LDQ5Ny4wNzgsNDgwLjQzNSw0OTYuODMxLDQ4MC42ODJ6IiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiNGREZERkMiIGRhdGEtb2xkX2NvbG9yPSIjRkY0RjAwIj48L3BhdGg+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxwYXRoIGQ9Ik00NDguMTg0LDMzNi40NUgyNzIuMDE1Yy00LjE0MiwwLTcuNSwzLjM1OC03LjUsNy41YzAsNC4xNDIsMy4zNTgsNy41LDcuNSw3LjVoMTc2LjE2OWM0LjE0MiwwLDcuNS0zLjM1OCw3LjUtNy41ICAgIEM0NTUuNjg0LDMzOS44MDgsNDUyLjMyNiwzMzYuNDUsNDQ4LjE4NCwzMzYuNDV6IiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiNGREZERkMiIGRhdGEtb2xkX2NvbG9yPSIjRkY0RjAwIj48L3BhdGg+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxwYXRoIGQ9Ik00MjQuMTYxLDI5Ni40MTJIMjk2LjAzN2MtNC4xNDIsMC03LjUsMy4zNTgtNy41LDcuNWMwLDQuMTQyLDMuMzU4LDcuNSw3LjUsNy41aDEyOC4xMjRjNC4xNDIsMCw3LjUtMy4zNTgsNy41LTcuNSAgICBDNDMxLjY2MSwyOTkuNzcsNDI4LjMwMywyOTYuNDEyLDQyNC4xNjEsMjk2LjQxMnoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I0ZERkRGQyIgZGF0YS1vbGRfY29sb3I9IiNGRjRGMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHBhdGggZD0iTTQyNC4xNjEsMzc2LjQ4OEgyOTYuMDM3Yy00LjE0MiwwLTcuNSwzLjM1OC03LjUsNy41YzAsNC4xNDIsMy4zNTgsNy41LDcuNSw3LjVoMTI4LjEyNGM0LjE0MiwwLDcuNS0zLjM1OCw3LjUtNy41ICAgIEM0MzEuNjYxLDM3OS44NDYsNDI4LjMwMywzNzYuNDg4LDQyNC4xNjEsMzc2LjQ4OHoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I0ZERkRGQyIgZGF0YS1vbGRfY29sb3I9IiNGRjRGMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHBhdGggZD0iTTEyNi44NzIsMTQ2LjExNGMtMi4yMzEtMTIuNzEtMTIuNjY2LTIzLjE0Ny0yNS4zNzctMjUuMzc3Yy05LjMxNC0xLjYzNC0xOC43NjEsMC44NzItMjUuOTE0LDYuODc5ICAgIGMtNy4xNTYsNi4wMDktMTEuMjYsMTQuODExLTExLjI2LDI0LjE0OGMwLDQuMTQyLDMuMzU4LDcuNSw3LjUsNy41YzQuMTQyLDAsNy41LTMuMzU4LDcuNS03LjVjMC00Ljg5NCwyLjE1My05LjUwOSw1LjkwNi0xMi42NjEgICAgYzMuODA2LTMuMTk2LDguNjYtNC40NzEsMTMuNjc0LTMuNTkyYzYuNTA0LDEuMTQyLDEyLjA1Myw2LjY5MSwxMy4xOTUsMTMuMTk1YzEuNTIyLDguNjY5LTMuNjY3LDE2Ljg1OS0xMi4wNjgsMTkuMDQ5ICAgIGMtNi45ODksMS44MjEtMTEuNjg0LDcuNjk4LTExLjY4NCwxNC42MjN2MS40MTdjMCw0LjE0MiwzLjM1OCw3LjUsNy41LDcuNWM0LjE0MiwwLDcuNS0zLjM1OCw3LjUtNy41di0xLjMwMiAgICBjMC4wNzUtMC4wNjMsMC4yMjctMC4xNiwwLjQ2Ny0wLjIyM0MxMTkuODQzLDE3OC4wOTMsMTI5Ljc1OCwxNjIuNTQ5LDEyNi44NzIsMTQ2LjExNHoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I0ZERkRGQyIgZGF0YS1vbGRfY29sb3I9IiNGRjRGMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHBhdGggZD0iTTk1LjkyNiwyMDAuMzE5aC0wLjA4Yy00LjE0MiwwLTcuNDYsMy4zNTgtNy40Niw3LjVjMCw0LjE0MiwzLjM5OCw3LjUsNy41NCw3LjVjNC4xNDIsMCw3LjUtMy4zNTgsNy41LTcuNSAgICBDMTAzLjQyNiwyMDMuNjc3LDEwMC4wNjgsMjAwLjMxOSw5NS45MjYsMjAwLjMxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I0ZERkRGQyIgZGF0YS1vbGRfY29sb3I9IiNGRjRGMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+"
            }
        ]
    },

    db: null,
    util: util,

    // 通用方法 Page.onLoad 中注册
    methods: {
        // 悬浮按钮点击事件
        buttonClicked: (e) => {
            util.navTo(e.detail.value.url);
        }
    },

    onLaunch: function () {
        wx.cloud.init({
            env: 'CLOUD_ENV',
            traceUser: true
        });

        this.db = wx.cloud.database({
            env: 'CLOUD_ENV'
        });

    },

    onError: function (err) {
        console.error(err);
    }

});